# Anchor Linkset

The Anchor [linkset](https://www.rfc-editor.org/rfc/rfc9264.html) is a JSON document that contains a link to a batch of document
operations along with a link to a verifiable credential containing proofs from one or more witnesses. This document is stored
in [Content Addressible Storage](../system/cas.html#content-addressable-storage-cas) using the multihash of the document as
the key. The multihash is used in the first segment of the DID (after did:orb)
of a canonical Orb DID. This multihash specifies the latest anchor object that contains a _create_ or _recover_ operation for the
Sidetree DID suffix. (See [did:orb](https://trustbloc.github.io/did-method-orb/#format).)

## Document Operation Batch

The batch of document operations is represented as a [linkset](https://www.rfc-editor.org/rfc/rfc9264.html). This document
contains the DIDs that were anchored, as well as the hashlink of the previous anchor of the DID (if any).

```json
{
  "linkset": [
    {
      "anchor": "hl:uEiAQrbzymVm66Ss_gLzbq98gh7T-qj0CRqCBKXnX8GdDog",
      "profile": [
        {
          "href": "https://w3id.org/orb#v0"
        }
      ],
      "author": [
        {
          "href": "did:web:orb.domain2.com:services:orb"
        }
      ],
      "item": [
        {
          "href": "did:orb:uEiDV0M-1QT8kydAOnPMqPM91Nm0z0uNBVAmkJ9w9051pKQ:EiABTjLFJYbV80tR8nwyheMozeu5NuTKobEhXj-WXgDANA",
          "previous": [
            "hl:uEiDV0M-1QT8kydAOnPMqPM91Nm0z0uNBVAmkJ9w9051pKQ"
          ]
        },
        {
          "href": "did:orb:uEiB01EmBT6YLcUotdB0aLhkbFRQBcn27NaFpKaaKokrL6A:EiCE2TdITX7NDszm_hmfu7YpiqWPdWmXaSVkctWBiaqNCg",
          "previous": [
            "hl:uEiB01EmBT6YLcUotdB0aLhkbFRQBcn27NaFpKaaKokrL6A"
          ]
        },
        {
          "href": "did:orb:uEiAcWJbpv_7q9qopjdkzGxz0nEWF9mAcXJhFTTKrxmVCtQ:EiAxOHn7Vs9CPwywMGH_Ha-CUyRwUf7ecBx1DYgaU8HwAw",
          "previous": [
            "hl:uEiAcWJbpv_7q9qopjdkzGxz0nEWF9mAcXJhFTTKrxmVCtQ"
          ]
        },
        {
          "href": "did:orb:uEiCqo8MiJ-x0sxhCn7LgQ68hrkYPMbAfFII2BMvtlReABA:EiAk24hZ3nERLuLXCMOf11Ugx-CAhmf_ONH2oJdVOc-A9A",
          "previous": [
            "hl:uEiCqo8MiJ-x0sxhCn7LgQ68hrkYPMbAfFII2BMvtlReABA"
          ]
        },
        {
          "href": "did:orb:uEiBPfalgYIBhr9jQZQXUsZLIzekwRhhuTEz3TUmm5Kf2_g:EiBSdKwgA5Nl0x-lVbEhcVwZZKvGHO4S314yAzWiX5p2TQ",
          "previous": [
            "hl:uEiBPfalgYIBhr9jQZQXUsZLIzekwRhhuTEz3TUmm5Kf2_g"
          ]
        }
      ]
    }
  ]
}
```

The fields of the Document Operation Batch linkset are described below.

#### Link Context (anchor)

The linkset contains one [link context object](https://www.rfc-editor.org/rfc/rfc9264.html#section-4.2.2)
where the context is specified by the "anchor" member. The "anchor" member contains the multihash of the Sidetree
[core index file](https://identity.foundation/sidetree/spec/#core-index-file). A number of link relations are defined
for the anchor, which are described below.

#### Author Relation

The _author_ relation specifies the author (creator) of the linkset.

#### Profile Relation

The _profile_ relation specifies the version of the application that was used to generate this linkset. For example,
the profile, "https://w3id.org/orb#v0", indicates that the linkset was generated by Orb version 0.

#### Item Relation

The _item_ relation contains an array of the DIDs that were created or updated. The "href" member contains the DID and
the "previous" member contains the hashlink of the previous anchor (in the case where the DID was updated).

NOTE: If a DID was created, then the "href" member contains a
[non-canonical](https://trustbloc.github.io/did-method-orb/#example-an-orb-did-without-anchoring-information) DID and
the "previous" member is not present. In the case of a DID update, the DID is in the
[canonical](https://trustbloc.github.io/did-method-orb/#example-a-canonical-orb-did) form and the "previous" attribute
is also present.

## Related Links Document

The Related Links document is represented as a [linkset](https://www.rfc-editor.org/rfc/rfc9264.html). This document
contains full hashlinks of the objects referenced in the [Document Operation Batch](#document-operation-batch).
(The Document Operation Batch file only contains the multihashes of the core index file and previous anchors,
whereas this document contains full hashlinks, including resolvable links to the files.) For example:

```json
{
  "linkset": [
    {
      "anchor": "hl:uEiBTUKyDwg-WB6BvZiCiw6joOBvwUzfWlZioR2zpuMCw7w",
      "profile": [
        {
          "href": "https://w3id.org/orb#v0"
        }
      ],
      "up": [
        {
          "href": "hl:uEiDV0M-1QT8kydAOnPMqPM91Nm0z0uNBVAmkJ9w9051pKQ:uoQ-CeEtodHRwczovL29yYi5kb21haW4xLmNvbS9jYXMvdUVpRFYwTS0xUVQ4a3lkQU9uUE1xUE05MU5tMHowdU5CVkFta0o5dzkwNTFwS1F4QmlwZnM6Ly9iYWZrcmVpZ3YyZGgza3FqN2V0ZTVhZHU0Nm12ZHp0M3Znend0aHV4ZGlma2F0amJoM3E2NWhobGpmZQ"
        },
        {
          "href": "hl:uEiB01EmBT6YLcUotdB0aLhkbFRQBcn27NaFpKaaKokrL6A:uoQ-CeEtodHRwczovL29yYi5kb21haW4xLmNvbS9jYXMvdUVpQjAxRW1CVDZZTGNVb3RkQjBhTGhrYkZSUUJjbjI3TmFGcEthYUtva3JMNkF4QmlwZnM6Ly9iYWZrcmVpZHUycmV5Y3Q1Z2JueXV1bGx1ZHVuYzRnaTNjdWthYzR0NXhtMjJjMmpqdTJma2Vzd2w1YQ"
        },
        {
          "href": "hl:uEiAcWJbpv_7q9qopjdkzGxz0nEWF9mAcXJhFTTKrxmVCtQ:uoQ-CeEtodHRwczovL29yYi5kb21haW4xLmNvbS9jYXMvdUVpQWNXSmJwdl83cTlxb3BqZGt6R3h6MG5FV0Y5bUFjWEpoRlRUS3J4bVZDdFF4QmlwZnM6Ly9iYWZrcmVpYTRsY2xvdHA3NjVsM2t1a21uM2V6cndoaHV0cmN5bDV0YWRyb2pxcmtuZ2t2NG16a2N3dQ"
        },
        {
          "href": "hl:uEiCqo8MiJ-x0sxhCn7LgQ68hrkYPMbAfFII2BMvtlReABA:uoQ-CeEtodHRwczovL29yYi5kb21haW4xLmNvbS9jYXMvdUVpQ3FvOE1pSi14MHN4aENuN0xnUTY4aHJrWVBNYkFmRklJMkJNdnRsUmVBQkF4QmlwZnM6Ly9iYWZrcmVpZmt1cGJzZWo3bW9zenJxcXU3d2xxZWhsemJ2emRhNm1ucWQ0a2llbnFlenB3emtmNGFhcQ"
        },
        {
          "href": "hl:uEiBPfalgYIBhr9jQZQXUsZLIzekwRhhuTEz3TUmm5Kf2_g:uoQ-BeEtodHRwczovL29yYi5kb21haW4yLmNvbS9jYXMvdUVpQlBmYWxnWUlCaHI5alFaUVhVc1pMSXpla3dSaGh1VEV6M1RVbW01S2YyX2c"
        }
      ],
      "via": [
        {
          "href": "hl:uEiAQrbzymVm66Ss_gLzbq98gh7T-qj0CRqCBKXnX8GdDog:uoQ-BeEtodHRwczovL29yYi5kb21haW4yLmNvbS9jYXMvdUVpQVFyYnp5bVZtNjZTc19nTHpicTk4Z2g3VC1xajBDUnFDQktYblg4R2REb2c"
        }
      ]
    }
  ]
}
```

The fields of the Related Links document are described below.

#### Link Context (anchor)

This linkset contains one [link context object](https://www.rfc-editor.org/rfc/rfc9264.html#section-4.2.2)
where the context is specified by the "anchor" member. The "anchor" member contains the multihash of the contents of the
[canonicalized](https://www.rfc-editor.org/rfc/rfc8785) [Document Operation Batch](#document-operation-batch).

A number of link relations are defined for the anchor, which are described below.

#### Profile Relation

The _profile_ relation specifies the version of the application that was used to generate this linkset. For example,
the profile, "https://w3id.org/orb#v0", indicates that the linkset was generated by Orb version 0.

#### Up Relation

The _up_ relation contains [hashlinks](https://datatracker.ietf.org/doc/html/draft-sporny-hashlink-07) of the previous
anchors that were referenced in the [Document Operation Batch](#document-operation-batch). Each hashlink contains the multihash
of the anchor as well as one or more links to the data. For example:

```
hl:uEiDV0M-1QT8kydAOnPMqPM91Nm0z0uNBVAmkJ9w9051pKQ:uoQ-CeEtodHRwczovL29yYi5kb21haW4xLmNvbS9jYXMvdUVpRFYwTS0xUVQ4a3lkQU9uUE1xUE05MU5tMHowdU5CVkFta0o5dzkwNTFwS1F4QmlwZnM6Ly9iYWZrcmVpZ3YyZGgza3FqN2V0ZTVhZHU0Nm12ZHp0M3Znend0aHV4ZGlma2F0amJoM3E2NWhobGpmZQ
```

The above hashlink contains the resource hash, ```uEiDV0M-1QT8kydAOnPMqPM91Nm0z0uNBVAmkJ9w9051pKQ```, and the following
links to the anchor file:

```
https://orb.domain1.com/cas/uEiDV0M-1QT8kydAOnPMqPM91Nm0z0uNBVAmkJ9w9051pKQ
ipfs://bafkreigv2dh3kqj7ete5adu46mvdzt3vgzwthuxdifkatjbh3q65hhljfe
```

#### Via Relation

The _via_ relation contains the [hashlink](https://datatracker.ietf.org/doc/html/draft-sporny-hashlink-07) of the Sidetree
[core index file](https://identity.foundation/sidetree/spec/#core-index-file). For example:

```
hl:uEiAQrbzymVm66Ss_gLzbq98gh7T-qj0CRqCBKXnX8GdDog:uoQ-BeEtodHRwczovL29yYi5kb21haW4yLmNvbS9jYXMvdUVpQVFyYnp5bVZtNjZTc19nTHpicTk4Z2g3VC1xajBDUnFDQktYblg4R2REb2c
```

The hashlink above contains the hash of the core index file, ```uEiAQrbzymVm66Ss_gLzbq98gh7T-qj0CRqCBKXnX8GdDog```, and a link to the file:

```
https://orb.domain2.com/cas/uEiAQrbzymVm66Ss_gLzbq98gh7T-qj0CRqCBKXnX8GdDog
```

## Anchor Credential

The [Anchor Credential](https://trustbloc.github.io/activityanchors/#anchorcredential) document is a
[Verifiable Credential](https://www.w3.org/TR/vc-data-model/) containing witness proofs. For example:

```json
{
  "@context": [
    "https://www.w3.org/2018/credentials/v1",
    "https://w3id.org/activityanchors/v1",
    "https://w3id.org/security/suites/jws-2020/v1",
    "https://w3id.org/security/suites/ed25519-2020/v1"
  ],
  "credentialSubject": {
    "anchor": "hl:uEiAQrbzymVm66Ss_gLzbq98gh7T-qj0CRqCBKXnX8GdDog",
    "href": "hl:uEiBTUKyDwg-WB6BvZiCiw6joOBvwUzfWlZioR2zpuMCw7w",
    "profile": "https://w3id.org/orb#v0",
    "rel": "linkset",
    "type": [
      "AnchorLink"
    ]
  },
  "id": "https://orb.domain2.com/vc/bb50fd02-724f-4ea4-ab6e-2bc8f61b211c",
  "issuanceDate": "2022-08-26T18:36:04.336599487Z",
  "issuer": "https://orb.domain2.com",
  "proof": [
    {
      "created": "2022-08-26T18:36:04.341591867Z",
      "domain": "https://orb.domain2.com",
      "proofPurpose": "assertionMethod",
      "proofValue": "z3R5bT34npK3n5rG7VkQ3K4Fw19aHofZy7B3MbsMXfmzsC3NJsBVuBDVEq5GBEzuu9oxz27zE6QNy9hdHfSz9ANQV",
      "type": "Ed25519Signature2020",
      "verificationMethod": "did:web:orb.domain2.com#xz4CY1jQeBDdrXESTL07YF9jdRrgYqG2wQglqVRpNrc"
    },
    {
      "created": "2022-08-26T18:36:05.466Z",
      "domain": "http://orb.vct:8077/maple2020",
      "proofPurpose": "assertionMethod",
      "proofValue": "z47QAfosLrSPFQz6AfWo41EqS2kPWb7RV5Epj93LWfM7FiXxHGMPnsM7kMHN7vZ7gk1n9ek25bU4M75QDPRvA69Zj",
      "type": "Ed25519Signature2020",
      "verificationMethod": "did:web:orb.domain1.com#-pwP-8YI7KBG-Nc-r29Qo_erYs0gY_vOjSZE0BdnDk8"
    }
  ],
  "type": [
    "VerifiableCredential",
    "AnchorCredential"
  ]
}
```

The "credentialSubject" object is a [link](https://www.rfc-editor.org/rfc/rfc5988) object containing the following members:

### type

The JSON-LD type, "AnchorLink", which indicates that this object is a [link](https://www.rfc-editor.org/rfc/rfc5988).

### Link Context (anchor)

The "anchor" member specifies the context of the link, which is the hash of the Sidetree
[core index file](https://identity.foundation/sidetree/spec/#core-index-file). Several link relations are defined
for the anchor, which are described below.

### profile

The _profile_ relation specifies the version of the application that was used to generate the credential subject.
For example, the profile, "https://w3id.org/orb#v0", indicates that the credential subject was generated by
Orb version 0.

### href

The _href_ member contains the target IRI, which is the hash of the [canonicalized](https://www.rfc-editor.org/rfc/rfc8785)
[Document Operation Batch](#document-operation-batch).

### rel

The _rel_ relation describes the type of the target object. In this case we use "linkset" since the target (href) is the
[Document Operation Batch](#document-operation-batch) linkset.

## Anchor Linkset

The Anchor Linkset is a document that links all of the above documents: [Document Operation Batch](#document-operation-batch),
[Related Links](#related-links-document), and [Anchor Credential](#anchor-credential). For example:

```json
{
  "linkset": [
    {
      "anchor": "hl:uEiBTUKyDwg-WB6BvZiCiw6joOBvwUzfWlZioR2zpuMCw7w",
      "profile": [
        {
          "href": "https://w3id.org/orb#v0"
        }
      ],
      "author": [
        {
          "href": "did:web:orb.domain2.com:services:orb"
        }
      ],
      "original": [
        {
          "href": "data:application/json,%7B%22linkset%22%3A%5B%7B%22anchor%22%3A%22hl%3AuEiAQrbzymVm66Ss_gLzbq98gh7T-qj0CRqCBKXnX8GdDog%22%2C%22author%22%3A%5B%7B%22href%22%3A%22did%3Aweb%3Aorb.domain2.com%3Aservices%3Aorb%22%7D%5D%2C%22item%22%3A%5B%7B%22href%22%3A%22did%3Aorb%3AuEiDV0M-1QT8kydAOnPMqPM91Nm0z0uNBVAmkJ9w9051pKQ%3AEiABTjLFJYbV80tR8nwyheMozeu5NuTKobEhXj-WXgDANA%22%2C%22previous%22%3A%5B%22hl%3AuEiDV0M-1QT8kydAOnPMqPM91Nm0z0uNBVAmkJ9w9051pKQ%22%5D%7D%2C%7B%22href%22%3A%22did%3Aorb%3AuEiB01EmBT6YLcUotdB0aLhkbFRQBcn27NaFpKaaKokrL6A%3AEiCE2TdITX7NDszm_hmfu7YpiqWPdWmXaSVkctWBiaqNCg%22%2C%22previous%22%3A%5B%22hl%3AuEiB01EmBT6YLcUotdB0aLhkbFRQBcn27NaFpKaaKokrL6A%22%5D%7D%2C%7B%22href%22%3A%22did%3Aorb%3AuEiAcWJbpv_7q9qopjdkzGxz0nEWF9mAcXJhFTTKrxmVCtQ%3AEiAxOHn7Vs9CPwywMGH_Ha-CUyRwUf7ecBx1DYgaU8HwAw%22%2C%22previous%22%3A%5B%22hl%3AuEiAcWJbpv_7q9qopjdkzGxz0nEWF9mAcXJhFTTKrxmVCtQ%22%5D%7D%2C%7B%22href%22%3A%22did%3Aorb%3AuEiCqo8MiJ-x0sxhCn7LgQ68hrkYPMbAfFII2BMvtlReABA%3AEiAk24hZ3nERLuLXCMOf11Ugx-CAhmf_ONH2oJdVOc-A9A%22%2C%22previous%22%3A%5B%22hl%3AuEiCqo8MiJ-x0sxhCn7LgQ68hrkYPMbAfFII2BMvtlReABA%22%5D%7D%2C%7B%22href%22%3A%22did%3Aorb%3AuEiBPfalgYIBhr9jQZQXUsZLIzekwRhhuTEz3TUmm5Kf2_g%3AEiBSdKwgA5Nl0x-lVbEhcVwZZKvGHO4S314yAzWiX5p2TQ%22%2C%22previous%22%3A%5B%22hl%3AuEiBPfalgYIBhr9jQZQXUsZLIzekwRhhuTEz3TUmm5Kf2_g%22%5D%7D%5D%2C%22profile%22%3A%5B%7B%22href%22%3A%22https%3A%2F%2Fw3id.org%2Forb%23v0%22%7D%5D%7D%5D%7D",
          "type": "application/linkset+json"
        }
      ],
      "related": [
        {
          "href": "data:application/json,%7B%22linkset%22%3A%5B%7B%22anchor%22%3A%22hl%3AuEiBTUKyDwg-WB6BvZiCiw6joOBvwUzfWlZioR2zpuMCw7w%22%2C%22profile%22%3A%5B%7B%22href%22%3A%22https%3A%2F%2Fw3id.org%2Forb%23v0%22%7D%5D%2C%22up%22%3A%5B%7B%22href%22%3A%22hl%3AuEiDV0M-1QT8kydAOnPMqPM91Nm0z0uNBVAmkJ9w9051pKQ%3AuoQ-CeEtodHRwczovL29yYi5kb21haW4xLmNvbS9jYXMvdUVpRFYwTS0xUVQ4a3lkQU9uUE1xUE05MU5tMHowdU5CVkFta0o5dzkwNTFwS1F4QmlwZnM6Ly9iYWZrcmVpZ3YyZGgza3FqN2V0ZTVhZHU0Nm12ZHp0M3Znend0aHV4ZGlma2F0amJoM3E2NWhobGpmZQ%22%7D%2C%7B%22href%22%3A%22hl%3AuEiB01EmBT6YLcUotdB0aLhkbFRQBcn27NaFpKaaKokrL6A%3AuoQ-CeEtodHRwczovL29yYi5kb21haW4xLmNvbS9jYXMvdUVpQjAxRW1CVDZZTGNVb3RkQjBhTGhrYkZSUUJjbjI3TmFGcEthYUtva3JMNkF4QmlwZnM6Ly9iYWZrcmVpZHUycmV5Y3Q1Z2JueXV1bGx1ZHVuYzRnaTNjdWthYzR0NXhtMjJjMmpqdTJma2Vzd2w1YQ%22%7D%2C%7B%22href%22%3A%22hl%3AuEiAcWJbpv_7q9qopjdkzGxz0nEWF9mAcXJhFTTKrxmVCtQ%3AuoQ-CeEtodHRwczovL29yYi5kb21haW4xLmNvbS9jYXMvdUVpQWNXSmJwdl83cTlxb3BqZGt6R3h6MG5FV0Y5bUFjWEpoRlRUS3J4bVZDdFF4QmlwZnM6Ly9iYWZrcmVpYTRsY2xvdHA3NjVsM2t1a21uM2V6cndoaHV0cmN5bDV0YWRyb2pxcmtuZ2t2NG16a2N3dQ%22%7D%2C%7B%22href%22%3A%22hl%3AuEiCqo8MiJ-x0sxhCn7LgQ68hrkYPMbAfFII2BMvtlReABA%3AuoQ-CeEtodHRwczovL29yYi5kb21haW4xLmNvbS9jYXMvdUVpQ3FvOE1pSi14MHN4aENuN0xnUTY4aHJrWVBNYkFmRklJMkJNdnRsUmVBQkF4QmlwZnM6Ly9iYWZrcmVpZmt1cGJzZWo3bW9zenJxcXU3d2xxZWhsemJ2emRhNm1ucWQ0a2llbnFlenB3emtmNGFhcQ%22%7D%2C%7B%22href%22%3A%22hl%3AuEiBPfalgYIBhr9jQZQXUsZLIzekwRhhuTEz3TUmm5Kf2_g%3AuoQ-BeEtodHRwczovL29yYi5kb21haW4yLmNvbS9jYXMvdUVpQlBmYWxnWUlCaHI5alFaUVhVc1pMSXpla3dSaGh1VEV6M1RVbW01S2YyX2c%22%7D%5D%2C%22via%22%3A%5B%7B%22href%22%3A%22hl%3AuEiAQrbzymVm66Ss_gLzbq98gh7T-qj0CRqCBKXnX8GdDog%3AuoQ-BeEtodHRwczovL29yYi5kb21haW4yLmNvbS9jYXMvdUVpQVFyYnp5bVZtNjZTc19nTHpicTk4Z2g3VC1xajBDUnFDQktYblg4R2REb2c%22%7D%5D%7D%5D%7D",
          "type": "application/linkset+json"
        }
      ],
      "replies": [
        {
          "href": "data:application/json,%7B%22%40context%22%3A%5B%22https%3A%2F%2Fwww.w3.org%2F2018%2Fcredentials%2Fv1%22%2C%22https%3A%2F%2Fw3id.org%2Factivityanchors%2Fv1%22%2C%22https%3A%2F%2Fw3id.org%2Fsecurity%2Fsuites%2Fjws-2020%2Fv1%22%2C%22https%3A%2F%2Fw3id.org%2Fsecurity%2Fsuites%2Fed25519-2020%2Fv1%22%5D%2C%22credentialSubject%22%3A%7B%22anchor%22%3A%22hl%3AuEiAQrbzymVm66Ss_gLzbq98gh7T-qj0CRqCBKXnX8GdDog%22%2C%22href%22%3A%22hl%3AuEiBTUKyDwg-WB6BvZiCiw6joOBvwUzfWlZioR2zpuMCw7w%22%2C%22profile%22%3A%22https%3A%2F%2Fw3id.org%2Forb%23v0%22%2C%22rel%22%3A%22linkset%22%2C%22type%22%3A%5B%22AnchorLink%22%5D%7D%2C%22id%22%3A%22https%3A%2F%2Forb.domain2.com%2Fvc%2Fbb50fd02-724f-4ea4-ab6e-2bc8f61b211c%22%2C%22issuanceDate%22%3A%222022-08-26T18%3A36%3A04.336599487Z%22%2C%22issuer%22%3A%22https%3A%2F%2Forb.domain2.com%22%2C%22proof%22%3A%5B%7B%22created%22%3A%222022-08-26T18%3A36%3A04.341591867Z%22%2C%22domain%22%3A%22https%3A%2F%2Forb.domain2.com%22%2C%22proofPurpose%22%3A%22assertionMethod%22%2C%22proofValue%22%3A%22z3R5bT34npK3n5rG7VkQ3K4Fw19aHofZy7B3MbsMXfmzsC3NJsBVuBDVEq5GBEzuu9oxz27zE6QNy9hdHfSz9ANQV%22%2C%22type%22%3A%22Ed25519Signature2020%22%2C%22verificationMethod%22%3A%22did%3Aweb%3Aorb.domain2.com%23xz4CY1jQeBDdrXESTL07YF9jdRrgYqG2wQglqVRpNrc%22%7D%2C%7B%22created%22%3A%222022-08-26T18%3A36%3A05.466Z%22%2C%22domain%22%3A%22http%3A%2F%2Forb.vct%3A8077%2Fmaple2020%22%2C%22proofPurpose%22%3A%22assertionMethod%22%2C%22proofValue%22%3A%22z47QAfosLrSPFQz6AfWo41EqS2kPWb7RV5Epj93LWfM7FiXxHGMPnsM7kMHN7vZ7gk1n9ek25bU4M75QDPRvA69Zj%22%2C%22type%22%3A%22Ed25519Signature2020%22%2C%22verificationMethod%22%3A%22did%3Aweb%3Aorb.domain1.com%23-pwP-8YI7KBG-Nc-r29Qo_erYs0gY_vOjSZE0BdnDk8%22%7D%5D%2C%22type%22%3A%5B%22VerifiableCredential%22%2C%22AnchorCredential%22%5D%7D",
          "type": "application/ld+json"
        }
      ]
    }
  ]
}
```

The fields of the anchor linkset are described below.

### Link Context (anchor)

The linkset contains one [link context object](https://www.rfc-editor.org/rfc/rfc9264.html#section-4.2.2)
where the context is specified by the "anchor" member. The "anchor" member contains the multihash of the
[canonicalized](https://www.rfc-editor.org/rfc/rfc8785) [Document Operation Batch](#document-operation-batch) file.
A number of link relations are defined for the anchor, which are described below.

### Author Relation

The _author_ relation specifies the author (creator) of the linkset.

### Profile Relation

The _profile_ relation specifies the version of the application that was used to generate this linkset. For example,
the profile, "https://w3id.org/orb#v0", indicates that the linkset was generated by Orb version 0.

### Original Relation

The _original_ relation links to the [Document Operation Batch](#document-operation-batch) file. In the above
example anchor linkset, a [data URL](https://datatracker.ietf.org/doc/html/rfc2397) is used for the target of this relation
such that the document operation batch is embedded in the href. NOTE: The contents of the data URL may be resolved by copying the
href and pasting it into a browser.

### Related Relation

The _related_ relation links to the [Related Links Document](#related-links-document). In the above
example anchor linkset, a [data URL](https://datatracker.ietf.org/doc/html/rfc2397) is used for the target of this relation
such that the Related Links Document is embedded in the href. NOTE: The contents of the data URL may be resolved by copying the
href and pasting it into a browser.

### Replies Relation

The _replies_ relation links to the [Anchor Credential](#anchor-credential). In the above example anchor linkset,
a [data URL](https://datatracker.ietf.org/doc/html/rfc2397) is used for the target of this relation such that the anchor
credential is embedded in the href. NOTE: The contents of the data URL may be resolved by copying the href and pasting
it into a browser.

### AnchorEvent

An AnchorEvent is an [ActivityPub](https://www.w3.org/TR/activitypub/) object that contains the Anchor Linkset and is embedded in
[Create](https://trustbloc.github.io/activityanchors/#create-activity) and
[Announce](https://trustbloc.github.io/activityanchors/#announce-activity) activities to propagate the Anchor Linkset to
other Orb domains. For example:

```json
{
  "@context": "https://w3id.org/activityanchors/v1",
  "object": {
    "linkset": [
      {
        "anchor": "hl:uEiBTUKyDwg-WB6BvZiCiw6joOBvwUzfWlZioR2zpuMCw7w",
        "author": [
          {
            "href": "did:web:orb.domain2.com:services:orb"
          }
        ],
        "original": [
          {
            "href": "data:application/json,%7B%22linkset%22%3A%5B%7B%22anchor%22%3A%22hl%3AuEiAQrbzymVm66Ss_gLzbq98gh7T-qj0CRqCBKXnX8GdDog%22%2C%22author%22%3A%5B%7B%22href%22%3A%22did%3Aweb%3Aorb.domain2.com%3Aservices%3Aorb%22%7D%5D%2C%22item%22%3A%5B%7B%22href%22%3A%22did%3Aorb%3AuEiDV0M-1QT8kydAOnPMqPM91Nm0z0uNBVAmkJ9w9051pKQ%3AEiABTjLFJYbV80tR8nwyheMozeu5NuTKobEhXj-WXgDANA%22%2C%22previous%22%3A%5B%22hl%3AuEiDV0M-1QT8kydAOnPMqPM91Nm0z0uNBVAmkJ9w9051pKQ%22%5D%7D%2C%7B%22href%22%3A%22did%3Aorb%3AuEiB01EmBT6YLcUotdB0aLhkbFRQBcn27NaFpKaaKokrL6A%3AEiCE2TdITX7NDszm_hmfu7YpiqWPdWmXaSVkctWBiaqNCg%22%2C%22previous%22%3A%5B%22hl%3AuEiB01EmBT6YLcUotdB0aLhkbFRQBcn27NaFpKaaKokrL6A%22%5D%7D%2C%7B%22href%22%3A%22did%3Aorb%3AuEiAcWJbpv_7q9qopjdkzGxz0nEWF9mAcXJhFTTKrxmVCtQ%3AEiAxOHn7Vs9CPwywMGH_Ha-CUyRwUf7ecBx1DYgaU8HwAw%22%2C%22previous%22%3A%5B%22hl%3AuEiAcWJbpv_7q9qopjdkzGxz0nEWF9mAcXJhFTTKrxmVCtQ%22%5D%7D%2C%7B%22href%22%3A%22did%3Aorb%3AuEiCqo8MiJ-x0sxhCn7LgQ68hrkYPMbAfFII2BMvtlReABA%3AEiAk24hZ3nERLuLXCMOf11Ugx-CAhmf_ONH2oJdVOc-A9A%22%2C%22previous%22%3A%5B%22hl%3AuEiCqo8MiJ-x0sxhCn7LgQ68hrkYPMbAfFII2BMvtlReABA%22%5D%7D%2C%7B%22href%22%3A%22did%3Aorb%3AuEiBPfalgYIBhr9jQZQXUsZLIzekwRhhuTEz3TUmm5Kf2_g%3AEiBSdKwgA5Nl0x-lVbEhcVwZZKvGHO4S314yAzWiX5p2TQ%22%2C%22previous%22%3A%5B%22hl%3AuEiBPfalgYIBhr9jQZQXUsZLIzekwRhhuTEz3TUmm5Kf2_g%22%5D%7D%5D%2C%22profile%22%3A%5B%7B%22href%22%3A%22https%3A%2F%2Fw3id.org%2Forb%23v0%22%7D%5D%7D%5D%7D",
            "type": "application/linkset+json"
          }
        ],
        "profile": [
          {
            "href": "https://w3id.org/orb#v0"
          }
        ],
        "related": [
          {
            "href": "data:application/json,%7B%22linkset%22%3A%5B%7B%22anchor%22%3A%22hl%3AuEiBTUKyDwg-WB6BvZiCiw6joOBvwUzfWlZioR2zpuMCw7w%22%2C%22profile%22%3A%5B%7B%22href%22%3A%22https%3A%2F%2Fw3id.org%2Forb%23v0%22%7D%5D%2C%22up%22%3A%5B%7B%22href%22%3A%22hl%3AuEiDV0M-1QT8kydAOnPMqPM91Nm0z0uNBVAmkJ9w9051pKQ%3AuoQ-CeEtodHRwczovL29yYi5kb21haW4xLmNvbS9jYXMvdUVpRFYwTS0xUVQ4a3lkQU9uUE1xUE05MU5tMHowdU5CVkFta0o5dzkwNTFwS1F4QmlwZnM6Ly9iYWZrcmVpZ3YyZGgza3FqN2V0ZTVhZHU0Nm12ZHp0M3Znend0aHV4ZGlma2F0amJoM3E2NWhobGpmZQ%22%7D%2C%7B%22href%22%3A%22hl%3AuEiB01EmBT6YLcUotdB0aLhkbFRQBcn27NaFpKaaKokrL6A%3AuoQ-CeEtodHRwczovL29yYi5kb21haW4xLmNvbS9jYXMvdUVpQjAxRW1CVDZZTGNVb3RkQjBhTGhrYkZSUUJjbjI3TmFGcEthYUtva3JMNkF4QmlwZnM6Ly9iYWZrcmVpZHUycmV5Y3Q1Z2JueXV1bGx1ZHVuYzRnaTNjdWthYzR0NXhtMjJjMmpqdTJma2Vzd2w1YQ%22%7D%2C%7B%22href%22%3A%22hl%3AuEiAcWJbpv_7q9qopjdkzGxz0nEWF9mAcXJhFTTKrxmVCtQ%3AuoQ-CeEtodHRwczovL29yYi5kb21haW4xLmNvbS9jYXMvdUVpQWNXSmJwdl83cTlxb3BqZGt6R3h6MG5FV0Y5bUFjWEpoRlRUS3J4bVZDdFF4QmlwZnM6Ly9iYWZrcmVpYTRsY2xvdHA3NjVsM2t1a21uM2V6cndoaHV0cmN5bDV0YWRyb2pxcmtuZ2t2NG16a2N3dQ%22%7D%2C%7B%22href%22%3A%22hl%3AuEiCqo8MiJ-x0sxhCn7LgQ68hrkYPMbAfFII2BMvtlReABA%3AuoQ-CeEtodHRwczovL29yYi5kb21haW4xLmNvbS9jYXMvdUVpQ3FvOE1pSi14MHN4aENuN0xnUTY4aHJrWVBNYkFmRklJMkJNdnRsUmVBQkF4QmlwZnM6Ly9iYWZrcmVpZmt1cGJzZWo3bW9zenJxcXU3d2xxZWhsemJ2emRhNm1ucWQ0a2llbnFlenB3emtmNGFhcQ%22%7D%2C%7B%22href%22%3A%22hl%3AuEiBPfalgYIBhr9jQZQXUsZLIzekwRhhuTEz3TUmm5Kf2_g%3AuoQ-BeEtodHRwczovL29yYi5kb21haW4yLmNvbS9jYXMvdUVpQlBmYWxnWUlCaHI5alFaUVhVc1pMSXpla3dSaGh1VEV6M1RVbW01S2YyX2c%22%7D%5D%2C%22via%22%3A%5B%7B%22href%22%3A%22hl%3AuEiAQrbzymVm66Ss_gLzbq98gh7T-qj0CRqCBKXnX8GdDog%3AuoQ-BeEtodHRwczovL29yYi5kb21haW4yLmNvbS9jYXMvdUVpQVFyYnp5bVZtNjZTc19nTHpicTk4Z2g3VC1xajBDUnFDQktYblg4R2REb2c%22%7D%5D%7D%5D%7D",
            "type": "application/linkset+json"
          }
        ],
        "replies": [
          {
            "href": "data:application/json,%7B%22%40context%22%3A%5B%22https%3A%2F%2Fwww.w3.org%2F2018%2Fcredentials%2Fv1%22%2C%22https%3A%2F%2Fw3id.org%2Factivityanchors%2Fv1%22%2C%22https%3A%2F%2Fw3id.org%2Fsecurity%2Fsuites%2Fjws-2020%2Fv1%22%2C%22https%3A%2F%2Fw3id.org%2Fsecurity%2Fsuites%2Fed25519-2020%2Fv1%22%5D%2C%22credentialSubject%22%3A%7B%22anchor%22%3A%22hl%3AuEiAQrbzymVm66Ss_gLzbq98gh7T-qj0CRqCBKXnX8GdDog%22%2C%22href%22%3A%22hl%3AuEiBTUKyDwg-WB6BvZiCiw6joOBvwUzfWlZioR2zpuMCw7w%22%2C%22profile%22%3A%22https%3A%2F%2Fw3id.org%2Forb%23v0%22%2C%22rel%22%3A%22linkset%22%2C%22type%22%3A%5B%22AnchorLink%22%5D%7D%2C%22id%22%3A%22https%3A%2F%2Forb.domain2.com%2Fvc%2Fbb50fd02-724f-4ea4-ab6e-2bc8f61b211c%22%2C%22issuanceDate%22%3A%222022-08-26T18%3A36%3A04.336599487Z%22%2C%22issuer%22%3A%22https%3A%2F%2Forb.domain2.com%22%2C%22proof%22%3A%5B%7B%22created%22%3A%222022-08-26T18%3A36%3A04.341591867Z%22%2C%22domain%22%3A%22https%3A%2F%2Forb.domain2.com%22%2C%22proofPurpose%22%3A%22assertionMethod%22%2C%22proofValue%22%3A%22z3R5bT34npK3n5rG7VkQ3K4Fw19aHofZy7B3MbsMXfmzsC3NJsBVuBDVEq5GBEzuu9oxz27zE6QNy9hdHfSz9ANQV%22%2C%22type%22%3A%22Ed25519Signature2020%22%2C%22verificationMethod%22%3A%22did%3Aweb%3Aorb.domain2.com%23xz4CY1jQeBDdrXESTL07YF9jdRrgYqG2wQglqVRpNrc%22%7D%2C%7B%22created%22%3A%222022-08-26T18%3A36%3A05.466Z%22%2C%22domain%22%3A%22http%3A%2F%2Forb.vct%3A8077%2Fmaple2020%22%2C%22proofPurpose%22%3A%22assertionMethod%22%2C%22proofValue%22%3A%22z47QAfosLrSPFQz6AfWo41EqS2kPWb7RV5Epj93LWfM7FiXxHGMPnsM7kMHN7vZ7gk1n9ek25bU4M75QDPRvA69Zj%22%2C%22type%22%3A%22Ed25519Signature2020%22%2C%22verificationMethod%22%3A%22did%3Aweb%3Aorb.domain1.com%23-pwP-8YI7KBG-Nc-r29Qo_erYs0gY_vOjSZE0BdnDk8%22%7D%5D%2C%22type%22%3A%5B%22VerifiableCredential%22%2C%22AnchorCredential%22%5D%7D",
            "type": "application/ld+json"
          }
        ]
      }
    ]
  },
  "type": "AnchorEvent",
  "url": "hl:uEiAH2Ea3QeUN8BEYhEsXGWWoY5JlYg767mxmYkSY4EcyjA:uoQ-BeEtodHRwczovL29yYi5kb21haW4yLmNvbS9jYXMvdUVpQUgyRWEzUWVVTjhCRVloRXNYR1dXb1k1SmxZZzc2N214bVlrU1k0RWN5akE"
}
```

The "object" field contains the [Anchor Linkset](#anchor-linkset) and the "url" field contains the hashlink of the Anchor Linkset, which includes
the links to the Anchor Linkset. For example:

```
hl:uEiAH2Ea3QeUN8BEYhEsXGWWoY5JlYg767mxmYkSY4EcyjA:uoQ-BeEtodHRwczovL29yYi5kb21haW4yLmNvbS9jYXMvdUVpQUgyRWEzUWVVTjhCRVloRXNYR1dXb1k1SmxZZzc2N214bVlrU1k0RWN5akE
```

The hashlink above contains the multihash of the Anchor Linkset, ```uEiAH2Ea3QeUN8BEYhEsXGWWoY5JlYg767mxmYkSY4EcyjA``` and a link to the file:

```
https://orb.domain2.com/cas/uEiAH2Ea3QeUN8BEYhEsXGWWoY5JlYg767mxmYkSY4EcyjA
```
